schema_version: 1.2.0
id: CVE-2021-37692
aliases:
- GHSA-cmgw-8vpc-rc59
modified: 2021-08-31T16:23Z
published: 2021-08-12T23:15Z
details: TensorFlow is an end-to-end open source platform for machine learning. In
  affected versions under certain conditions, Go code can trigger a segfault in string
  deallocation. For string tensors, `C.TF_TString_Dealloc` is called during garbage
  collection within a finalizer function. However, tensor structure isn't checked
  until encoding to avoid a performance penalty. The current method for dealloc assumes
  that encoding succeeded, but segfaults when a string tensor is garbage collected
  whose encoding failed (e.g., due to mismatched dimensions). To fix this, the call
  to set the finalizer function is deferred until `NewTensor` returns and, if encoding
  failed for a string tensor, deallocs are determined based on bytes written. We have
  patched the issue in GitHub commit 8721ba96e5760c229217b594f6d2ba332beedf22. The
  fix will be included in TensorFlow 2.6.0. We will also cherrypick this commit on
  TensorFlow 2.5.1, which is the other affected version.
severity:
- type: CVSS_V3
  score: 5.5
- type: CVSS_V2
  score: 2.1
affected:
- package:
    name: tensorflow
    cpe: cpe:2.3:a:google:tensorflow
- ranges:
  - type: GIT
    repo: https://github.com/tensorflow/tensorflow
    events:
    - introduced: '0'
    - fixed: 8721ba96e5760c229217b594f6d2ba332beedf22
- database_specific:
    CWE:
    - CWE-20
    CVSS:
      Score: 5.5
      Severity: MEDIUM
      Code: CVSS:3.1/AV:L/AC:L/PR:L/UI:N/S:U/C:N/I:N/A:H
references:
- type: WEB
  url: https://github.com/tensorflow/tensorflow/pull/50508
- type: ADVISORY
  url: https://github.com/tensorflow/tensorflow/security/advisories/GHSA-cmgw-8vpc-rc59
- type: FIX
  url: https://github.com/tensorflow/tensorflow/commit/8721ba96e5760c229217b594f6d2ba332beedf22
